<!DOCTYPE html>
<html>
<head>
    <title>Edit Jabatan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
</head>
<body class="bg-gray-100">
    <div class="flex">
        <!-- Sidebar -->
        <div class="w-64 bg-blue-700 text-white min-h-screen">
            <div class="p-4 flex items-center">
                <img src="../aset/Logo-Unpam-Universitas-Pamulang.png" alt="University Logo" class="w-10 h-10 mr-2" width="50" height="50"/>
                <div>
                    <h1 class="text-lg font-bold">UNIVERSITAS PAMULANG</h1>
                </div>
            </div>
            <div class="p-4">
                <div class="flex items-center mb-4">
                    <img src="https://storage.googleapis.com/a1aa/image/TpLGuP7tHOKRL1w0OlM5hJc0vrXNYhTFeJexxHfFNHvvMxZnA.jpg" alt="User  Avatar" class="w-10 h-10 rounded-full mr-2" width="40" height="40"/>
                    <div>
                        <p>Muhamad Mahromi</p>
                        <p class="text-sm">Administrator</p>
                    </div>
                </div>
                <ul>
                    <li class="mb-2">
                        <a href="../index.html" class="flex items-center p-2 bg-blue-800 rounded">
                            <i class="fas fa-tachometer-alt mr-2"></i> Dashboard
                        </a>
                    </li>
                </ul>
                <p class="mt-4 mb-2">MENU KARYAWAN</p>
                <ul>
                    <li class="mb-2">
                        <a href="../Karyawan/karyawan.html" class="flex items-center p-2 hover:bg-blue-800 rounded">
                            <i class="fas fa-users mr-2"></i> Karyawan
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="jabatan.html" class="flex items-center p-2 hover:bg-blue-800 rounded">
                            <i class="fas fa-briefcase mr-2"></i> Jabatan
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="../Divisi/divisi.html" class="flex items-center p-2 hover:bg-blue-800 rounded">
                            <i class="fas fa-building mr-2"></i> Divisi
                        </a>
                    </li>
                </ul>
                <p class="mt-4 mb-2">MENU ABSENSI</p>
                <ul>
                    <li class="mb-2">
                        <a href="../Absensi/absensi.html" class="flex items-center p-2 hover:bg-blue-800 rounded">
                            <i class="fas fa-calendar-check mr-2"></i> Absensi
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="../Izin/izin.html" class="flex items-center p-2 hover:bg-blue-800 rounded">
                            <i class="fas fa-calendar-times mr-2"></i> Izin
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="../Lembur/lembur.html" class="flex items-center p-2 hover:bg-blue-800 rounded">
                            <i class="fas fa-clock mr-2"></i> Lembur
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Main Content -->
        <div class="flex-1 p-6">
            <div class="bg-white p-6 rounded shadow-md">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold">Edit Jabatan</h2>
                </div>
                <form id="jabatanForm">
                    <div class="grid grid-cols-1 gap-4">
                        <div>
                            <label class="block text-gray-700">Kode Jabatan</label>
                            <input id="kode" class="w-full border border-gray-300 p-2 rounded" type="text" required/>
                        </div>
                        <div>
                            <label class="block text-gray-700">Jabatan</label>
                            <input id="jabatan" class="w-full border border-gray-300 p-2 rounded" type="text" required/>
                        </div>
                    </div>
                    <div class="flex justify-end mt-4">
                        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Simpan</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>
        const jabatanData = JSON.parse(localStorage.getItem('jabatanData')) || [];
        const urlParams = new URLSearchParams(window.location.search);
        const index = urlParams.get('index');

        if (index !== null) {
            const jabatan = jabatanData[index];
            document.getElementById('kode').value = jabatan.kode;
            document.getElementById('jabatan').value = jabatan.jabatan;
        }

        document.getElementById('jabatanForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const kode = document.getElementById('kode').value;
            const jabatan = document.getElementById('jabatan').value;

            if (index !== null) {
                // Update existing jabatan
                jabatanData[index] = { kode, jabatan };
            } else {
                // Add new jabatan
                jabatanData.push({ kode, jabatan });
            }

            localStorage.setItem('jabatanData', JSON.stringify(jabatanData));
            alert('Data jabatan berhasil disimpan!');
            window.location.href = 'jabatan.html'; // Kembali ke halaman jabatan
        });
    </script>
</body>
</html>